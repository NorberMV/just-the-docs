{% comment %} build the value for style by looking for include variables {% endcomment %}
{% assign style = include.style | default: "" %}
{% if include.width %}
    {% assign style = style | append: "width: " | append: include.width | append: ";" %}
{% endif %}
{% if height %}
    {% assign style = style | append: "height: " | append: include.height | append: ";" %}
{% endif %}
{% if include.dropshadow == false %}
	{% comment %} if dropshadow is false, remove the box-shadow inherited by <img> {% endcomment %}
    {% assign style = style | append: "box-shadow: none;" %}
{% endif %}
{% comment %} In order to properly render markdown in variables, we need to capture{% endcomment %}
{% comment %}the whole include's output and markdownify it.{% endcomment %}
{% comment %}This is because markdownifying variables alone will wrap thine in <p> elements.{% endcomment %}
{% capture includeresult %}
<figure>
  <img src="{{include.src}}" style="{{style}}">
  {% if include.caption %}<figcaption>{{include.caption}}</figcaption>{% endif %}
</figure>
{% endcapture %}
{{ includeresult | markdownify }}